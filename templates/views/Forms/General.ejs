<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./css/General.css" />
  </head>
  <body>
    <div class="general-information">
      <% if(typeof error != 'undefined'){ %> <% error.forEach(function(err){%>

      <div
        id="error-div"
        class="alert alert-warning alert-dismissible fade show"
        role="alert"
      >
        <%= err.msg %>
        <button
          id="error-btn"
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
          aria-label="Close"
        ></button>
      </div>

      <% }) %> <% } %>

      <h3>How much do you need?</h3>

      <div class="important-notice">
        <p>
          If you are not sure about your goal, we recommend you to set ৳1000.
          You will be able to change it before being supported.
        </p>
      </div>
      <form method="post" id="form">
        <div class="project-related-demand">
          <input
            type="number"
            id="amount"
            placeholder="place your amount"
            name="taka"
            autocomplete="off"
          />
          <p>BDT</p>
        </div>

        <div class="amount_related_notice">
          <p>You can set a goal amount between ৳100 and ৳5000.Click to edit</p>
        </div>

        <div class="deadline_section">
          <p class="headline">Deadline</p>
          <input
            onclick="fixDate()"
            type="date"
            name="date"
            id="p_deadline"
            class="input_box1"
          />
        </div>

        <div class="category_section">
          <p class="headline">Category</p>
          <input
            onclick="openCategory()"
            name="option"
            type="text"
            placeholder="Choose your category"
            id="category_box"
            class="input_box2"
            autocomplete="off"
          /><i
            onclick="openCategory()"
            style="text-align: end; cursor: pointer"
            class="arrow down"
          ></i>
        </div>

        <div id="myDropdown" class="dropdown-content">
          <p onclick="GetValue('Medical')" class="property" href="#">Medical</p>
          <p onclick="GetValue('Education')" class="property" href="#">
            Education
          </p>

          <p onclick="GetValue('Family')" class="property" href="#">Family</p>
          <p onclick="GetValue('Study Abroad')" class="property" href="#">
            Study Abroad
          </p>
          <p onclick="GetValue('Business')" class="property" href="#">
            Business
          </p>
          <p onclick="GetValue('Disaster')" class="property" href="#">
            Disaster
          </p>
          <p onclick="GetValue('Commuinty')" class="property" href="#">
            Community
          </p>
          <p onclick="GetValue('Others')" class="property" href="#">Others</p>
        </div>

        <div class="submit_section">
          <button type="submit" id="next-page" class="next_page">Next</button>
        </div>

        <p class="terms">
          By creating a project, the user agrees with Airtripp's and
          Airfunding's
          <label class="policy">Terms of Use and Privacy Policy</label>.
        </p>

        <!-- amount box to confirm amount -->
      </form>
    </div>

    <script>
      const category_box = document.getElementById("category_box");
      const dropdown_content = document.getElementById("myDropdown");
      const amount = document.getElementById("amount");
      const deadline = document.getElementById("p_deadline");
      const form = document.querySelector("#form");

      function fixDate() {
        let dateobj = new Date();
        let CurrDate = dateobj.getDate() + 1;
        let currMonth = dateobj.getMonth() + 1;
        let currYear = dateobj.getUTCFullYear();

        if (CurrDate < 10) {
          CurrDate = "0" + CurrDate;
        }

        if (currMonth < 10) {
          currMonth = "0" + currMonth;
        }

        let Today = currYear + "-" + currMonth + "-" + CurrDate;
        //console.log(Today);

        document.getElementById("p_deadline").setAttribute("min", Today);
      }

      function openCategory() {
        document.querySelector(".category_section").style.marginBottom = "0rem";
        if (dropdown_content.style.display != "block") {
          dropdown_content.style.display = "block";
        } else {
          dropdown_content.style.display = "none";
          document.querySelector(".category_section").style.marginBottom =
            "1rem";
        }
      }

      function GetValue(val) {
        category_box.value = val;
        dropdown_content.style.display = "none";
        document.querySelector(".category_section").style.marginBottom = "1rem";
      }

      function OpenAmountModal() {
        alert("Hello I'm calling");
      }

      /* event click for closing the error related div */
      const error_div = document.querySelectorAll("#error-btn");
      for (let index = 0; index < error_div.length; index++) {
        error_div[index].addEventListener("click", function () {
          this.parentNode.remove();
        });
      }
    </script>
  </body>
</html>
