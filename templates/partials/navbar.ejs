<% if(userInformation && userInformation.useremail){ %>

<nav id="navbar">
  <div class="logo"><a href="/">EasyFunD</a></div>
  <!-- <input type="checkbox" id="click" /> -->
  <label onclick="opennav()" id="show_nav" for="click" class="menu-btn">
    <div class="menu-bar">
      <div class="bar1"></div>
      <div class="bar2"></div>
      <div class="bar3"></div>
    </div>
  </label>

  <div class="nav_menu_item">
    <ul id="nav_menu_item">
      <li>
        <a href="/general">Start a project</a>
      </li>

      <li class="image" onclick="opennav()" id="box_sign">
        <img
          src="data:image/<%=profileImage.contentType%>;base64,
        <%=profileImage.data.toString('base64')%>"
          alt="user-profile"
        />

        <div id="menu-bar" class="menu-bar">
          <div class="bar1"></div>
          <div class="bar2"></div>
          <div class="bar3"></div>
        </div>
      </li>
    </ul>
  </div>
</nav>

<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn bold" onclick="closeUserNav()">
    &times;
  </a>
  <% if(username != ""){ %>

  <p style="font-size: 20px; font-weight: bold"><%= username %></p>

  <% } %>

  <hr />

  <a class="article bold" href="/article/how_it_works.html">How it works</a>
  <a class="article bold" href="/article/write_a_story.html"
    >How to write a Story</a
  >
  <a class="article bold" href="/article/category_tips.html">Category Tips</a>

  <hr />

  <a href="/discover/all-projects">Discover All Project</a>

  <a href="/user-project/all-listed">Project List</a>

  <a href="/user/account"> Account Settings</a>

  <a href="/personal/information"> Personal Identification</a>

  <a href="#">Privacy & Policy</a>

  <a onclick="logout()" href="#">Sign out</a>
</div>

<% }else{ %>

<nav id="navbar_">
  <div class="logo"><a href="/">EasyFunD</a></div>
  <!-- <input type="checkbox" id="click" /> -->
  <label id="show_nav" for="click" class="menu-btn">
    <div class="menu-bar">
      <div class="bar1"></div>
      <div class="bar2"></div>
      <div class="bar3"></div>
    </div>
  </label>
  <div class="nav_menu_item">
    <ul id="nav_menu_item">
      <li>
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"
          >&times; close</a
        >
      </li>
      <li class="dropdown">
        <a href="#">How it works</a>
        <div class="dropdown-content">
          <a class="content" href="/article/how_it_works.html">How it works</a>
          <a class="content" href="/article/write_a_story.html"
            >How to write a story</a
          >

          <a class="content" href="/article/category_tips.html"
            >Category Tips</a
          >
        </div>
      </li>

      <li><a href="/discover/all-projects">Discover project</a></li>
      <li>
        <a href="/general">Start a project</a>
      </li>
      <li id="box_sign">
        <a href="/login">
          <i class="fa fa-user" aria-hidden="true"></i>
          Log In
        </a>
      </li>
    </ul>
  </div>
</nav>

<% } %>

<script>
  function logout() {
    fetch("/", {
      method: "DELETE",
    });

    setTimeout(() => {
      window.location.replace("/");
    }, 1000);
  }

  function opennav() {
    document.getElementById("mySidenav").classList.toggle("openNavbar");
  }
  function closeUserNav() {
    document.getElementById("mySidenav").classList.remove("openNavbar");
  }

  let nav_menu_item = document.getElementById("nav_menu_item");
  let show_nav = document.getElementById("show_nav");

  show_nav.addEventListener("click", function (e) {
    timecount += 1;
    if (timecount % 2 == 0) {
      nav_menu_item.style.right = "-100%";
    } else {
      nav_menu_item.style.right = "0";
    }
    console.log(timecount);
  });
</script>
